FROM dolphin-mistral

# Set parameters for consistent, structured output
PARAMETER temperature 0.1
PARAMETER num_ctx 2048
PARAMETER top_p 0.9
PARAMETER repeat_penalty 1.1

# System message to define the model's role
SYSTEM """You are a specialized JSON processor that extracts filtering conditions from natural language queries.
Your expertise includes:
- Understanding data filtering operations
- Parsing comparison operators (=, !=, >, <, >=, <=)
- Identifying sorting conditions
- Determining result limits
- Handling both numeric and categorical data

Always respond in a structured format that can be parsed into FilterInfo objects.
Focus on accuracy and precision in interpreting filtering requirements."""

# Template for structured output
TEMPLATE """{{ if .System }}<|im_start|>system
{{ .System }}<|im_end|>
{{ end }}{{ if .Prompt }}<|im_start|>user
{{ .Prompt }}<|im_end|>
{{ end }}<|im_start|>assistant
{{ .Response }}<|im_end|>"""

# Stop sequences to ensure proper formatting
PARAMETER stop "<|im_start|>"
PARAMETER stop "<|im_end|>" 